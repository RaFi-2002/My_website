<!-- Replace your previous modal section and script with this -->
<!-- Modal with Image and Embedded PDF Viewer -->
<div id="modal" class="modal">
  <span class="close">&times;</span>
  <div style="text-align: center; max-width: 90vw; margin: auto;">
    <img class="modal-content" id="modal-img" />
    <div id="caption"></div>
    <iframe id="pdf-viewer"
      style="width: 100%; height: 500px; margin-top: 20px; border: none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"
      allowfullscreen>
    </iframe>
  </div>
</div>

<script>
  const modal = document.getElementById("modal");
  const modalImg = document.getElementById("modal-img");
  const captionText = document.getElementById("caption");
  const closeBtn = document.querySelector(".close");
  const pdfViewer = document.getElementById("pdf-viewer");

  document.querySelectorAll(".gallery-img").forEach(img => {
    img.addEventListener("click", () => {
      modal.style.display = "block";
      modalImg.src = img.src;
      captionText.innerText = img.alt;

      // Extract filename (e.g. "aspensimulation.jpg" â†’ "aspensimulation")
      const baseName = img.src.split("/").pop().split(".")[0];
      pdfViewer.src = `certificates/${baseName}.pdf`;
    });
  });

  closeBtn.addEventListener("click", () => {
    modal.style.display = "none";
    pdfViewer.src = "";
  });

  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      modal.style.display = "none";
      pdfViewer.src = "";
    }
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && modal.style.display === "block") {
      modal.style.display = "none";
      pdfViewer.src = "";
    }
  });
</script>
